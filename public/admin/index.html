<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="robots" content="noindex" />
  <title>Content Manager</title>
  <script>
    // Set manual init BEFORE loading CMS
    window.CMS_MANUAL_INIT = true;
    
    // Debug logging
    console.log('üîß CMS Manual Init Setup');
    console.log('üìç Current URL:', window.location.href);
    console.log('üìÇ Base URL:', window.location.origin);
    console.log('üè† Pathname:', window.location.pathname);
    
    // Test config.yml accessibility
    fetch('./config.yml')
      .then(response => {
        console.log('‚úÖ config.yml fetch response:', response.status, response.statusText);
        return response.text();
      })
      .then(text => {
        console.log('üìÑ config.yml content length:', text.length);
        console.log('üìÑ config.yml first 100 chars:', text.substring(0, 100));
      })
      .catch(error => {
        console.error('‚ùå config.yml fetch error:', error);
        
        // Try alternative paths
        console.log('üîç Trying alternative paths...');
        
        fetch('/admin/config.yml')
          .then(resp => console.log('üîç /admin/config.yml:', resp.status))
          .catch(e => console.log('‚ùå /admin/config.yml failed:', e.message));
          
        fetch('/config.yml')
          .then(resp => console.log('üîç /config.yml:', resp.status))
          .catch(e => console.log('‚ùå /config.yml failed:', e.message));
          
        fetch('/api/config')
          .then(resp => console.log('üîç /api/config:', resp.status))
          .catch(e => console.log('‚ùå /api/config failed:', e.message));
      });
  </script>
</head>
<body>
  <div id="nc-root"></div>
  <script src="https://unpkg.com/decap-cms@^3.0.0/dist/decap-cms.js"></script>
  <script>
    // Wait for CMS to be fully loaded, then override with our structured config
    console.log('üöÄ Starting CMS initialization process...');
    
    // Monitor CMS loading
    if (window.CMS) {
      console.log('‚úÖ CMS object already available');
    } else {
      console.log('‚è≥ Waiting for CMS object...');
    }
    
    document.addEventListener('DOMContentLoaded', function() {
      console.log('üìÑ DOM Content Loaded');
      
      // Small delay to ensure CMS is ready
      setTimeout(function() {
        console.log('üîÑ Initializing manual CMS config...');
        
        if (!window.CMS) {
          console.error('‚ùå CMS object not found!');
          return;
        }
        
        console.log('‚úÖ CMS object found, proceeding with configuration...');
        const config = {
      backend: {
        name: 'github',
        repo: 'lukegiuff/ObsessedWithSuccess',
        branch: 'main',
        base_url: 'https://decap-proxy-obsessedwithsuccess.giuffa88.workers.dev',
        auth_endpoint: '/auth'
      },
      local_backend: false,
      site_url: 'https://owsconsultinggroup.com',
      display_url: 'https://owsconsultinggroup.com',
      media_folder: 'public/assets/images',
      public_folder: '/assets/images',
      collections: [
        {
          name: 'pages',
          label: 'Pages',
          folder: 'content/pages',
          create: true,
          slug: '{{slug}}',
          fields: [
            {label: 'Title', name: 'title', widget: 'string'},
            {label: 'Description', name: 'description', widget: 'text', required: false},
            {label: 'Featured Image', name: 'featured_image', widget: 'image', required: false},
            {label: 'Hero Quote', name: 'hero_quote', widget: 'text', required: false, hint: 'Main hero section quote'},
            {
              label: 'Services',
              name: 'services',
              widget: 'object',
              fields: [
                {label: 'Section Intro', name: 'intro', widget: 'text', default: 'Comprehensive talent solutions backed by real-world experience and industry expertise.'},
                {
                  label: 'Service Items',
                  name: 'items',
                  widget: 'list',
                  fields: [
                    {label: 'Service Title', name: 'title', widget: 'string'},
                    {label: 'Service Description', name: 'description', widget: 'text'}
                  ]
                }
              ]
            },
            {
              label: 'About Our Approach',
              name: 'about_approach',
              widget: 'object',
              fields: [
                {label: 'Section Title', name: 'title', widget: 'string', default: 'About Our Approach'},
                {label: 'Introduction', name: 'intro', widget: 'text'},
                {
                  label: 'Key Points',
                  name: 'points',
                  widget: 'list',
                  field: {label: 'Point', name: 'point', widget: 'string'}
                }
              ]
            },
            {
              label: 'The Difference Section',
              name: 'difference_section',
              widget: 'object',
              fields: [
                {label: 'Section Title', name: 'title', widget: 'string', default: 'The'},
                {label: 'Section Subtitle', name: 'subtitle', widget: 'string', default: 'Difference', hint: 'Highlighted word in title'},
                {
                  label: 'Traditional Recruiting',
                  name: 'traditional',
                  widget: 'object',
                  fields: [
                    {label: 'Title', name: 'title', widget: 'string', default: 'Traditional Recruiting'},
                    {
                      label: 'Points',
                      name: 'points',
                      widget: 'list',
                      field: {label: 'Point', name: 'point', widget: 'string'}
                    }
                  ]
                },
                {
                  label: 'Our Approach',
                  name: 'our_approach',
                  widget: 'object',
                  fields: [
                    {label: 'Title', name: 'title', widget: 'string', default: 'Our Approach'},
                    {
                      label: 'Points',
                      name: 'points',
                      widget: 'list',
                      field: {label: 'Point', name: 'point', widget: 'string'}
                    }
                  ]
                },
                {label: 'Bottom Quote', name: 'quote', widget: 'text', default: 'We don\'t just place candidates. We elevate careers and transform organizations through the power of experience-driven insight.'}
              ]
            },
            {
              label: 'Contact Section',
              name: 'contact_section',
              widget: 'object',
              fields: [
                {label: 'Section Title', name: 'title', widget: 'string', default: 'Start the'},
                {label: 'Section Subtitle', name: 'subtitle', widget: 'string', default: 'Conversation', hint: 'Highlighted word in title'},
                {label: 'Introduction Text', name: 'intro', widget: 'text'},
                {
                  label: 'What to Expect',
                  name: 'expectations',
                  widget: 'list',
                  field: {label: 'Expectation', name: 'expectation', widget: 'string'}
                },
                {label: 'CTA Button Text', name: 'cta_text', widget: 'string', default: 'Schedule a Consultation'},
                {label: 'Email Subject', name: 'email_subject', widget: 'string', default: 'Talent Strategy Consultation'}
              ]
            },
            {
              label: 'Call to Action',
              name: 'call_to_action',
              widget: 'object',
              fields: [
                {label: 'Section Title', name: 'title', widget: 'string', default: 'Experience the Technology Difference'},
                {label: 'Content', name: 'content', widget: 'text'}
              ]
            },
            {label: 'Body (Legacy)', name: 'body', widget: 'markdown', required: false, hint: 'Legacy markdown content - all content should now use structured fields above'}
          ]
        },
        {
          name: 'blog',
          label: 'Blog Posts',
          folder: 'content/blog',
          create: true,
          slug: '{{year}}-{{month}}-{{day}}-{{slug}}',
          fields: [
            {label: 'Title', name: 'title', widget: 'string'},
            {label: 'Publish Date', name: 'date', widget: 'datetime'},
            {label: 'Description', name: 'description', widget: 'text'},
            {label: 'Featured Image', name: 'featured_image', widget: 'image', required: false},
            {label: 'Tags', name: 'tags', widget: 'list', required: false},
            {label: 'Body', name: 'body', widget: 'markdown'}
          ]
        },
        {
          name: 'settings',
          label: 'Site Settings',
          files: [
            {
              file: 'content/settings/general.yml',
              label: 'General Settings',
              name: 'general',
              fields: [
                {label: 'Site Title', name: 'site_title', widget: 'string'},
                {label: 'Site Description', name: 'site_description', widget: 'text'},
                {label: 'Site Logo', name: 'site_logo', widget: 'image', required: false},
                {label: 'Contact Email', name: 'contact_email', widget: 'string'},
                {
                  label: 'Social Media',
                  name: 'social',
                  widget: 'object',
                  fields: [
                    {label: 'Twitter', name: 'twitter', widget: 'string', required: false},
                    {label: 'LinkedIn', name: 'linkedin', widget: 'string', required: false},
                    {label: 'GitHub', name: 'github', widget: 'string', required: false}
                  ]
                },
                {
                  label: 'Technology Specializations',
                  name: 'specializations',
                  widget: 'list',
                  default: ['SOFTWARE', 'DATA', 'CLOUD', 'SECURITY', 'TELECOM'],
                  fields: [
                    {label: 'Specialization', name: 'name', widget: 'string'}
                  ]
                }
              ]
            }
          ]
        },
        {
          name: 'navigation',
          label: 'Navigation',
          files: [
            {
              file: 'content/navigation/main.yml',
              label: 'Main Navigation',
              name: 'main',
              fields: [
                {
                  label: 'Navigation Items',
                  name: 'items',
                  widget: 'list',
                  fields: [
                    {label: 'Label', name: 'label', widget: 'string'},
                    {label: 'URL', name: 'url', widget: 'string'},
                    {label: 'External', name: 'external', widget: 'boolean', default: false}
                  ]
                }
              ]
            }
          ]
        }
      ]
    };
    
    // Initialize CMS with our structured configuration
    console.log('üéØ Calling CMS.init with structured config...');
    
    try {
      CMS.init({ config });
      console.log('‚úÖ CMS.init called successfully!');
    } catch (error) {
      console.error('‚ùå CMS.init failed:', error);
    }
      }, 500); // 500ms delay to ensure CMS is ready
    });
  </script>
</body>
</html>